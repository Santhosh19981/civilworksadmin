{"ast":null,"code":"import { BehaviorSubject, Observable } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport let CoreService = /*#__PURE__*/(() => {\n  class CoreService {\n    http;\n    products = new BehaviorSubject([]);\n    categories = new BehaviorSubject([]);\n    rentals = new BehaviorSubject([]);\n    orders = new BehaviorSubject([]);\n    payments = new BehaviorSubject([]);\n    customers = new BehaviorSubject([]);\n    settings = new BehaviorSubject({\n      deliveryCharge: 50,\n      taxPercent: 12,\n      enableCOD: true,\n      themeColor: '#0B2C4D'\n    });\n    constructor(http) {\n      this.http = http;\n      this.initData();\n    }\n    initData() {\n      this.loadFromStorageOrJson('products', 'assets/data/products.json', this.products);\n      this.loadFromStorageOrJson('categories', 'assets/data/categories.json', this.categories);\n      this.loadFromStorageOrJson('rentals', 'assets/data/rentals.json', this.rentals);\n      this.loadFromStorageOrJson('orders', 'assets/data/orders.json', this.orders);\n      this.loadFromStorageOrJson('payments', 'assets/data/payments.json', this.payments);\n      this.loadFromStorageOrJson('customers', 'assets/data/customers.json', this.customers);\n      const savedSettings = localStorage.getItem('settings');\n      if (savedSettings) {\n        this.settings.next(JSON.parse(savedSettings));\n      }\n    }\n    loadFromStorageOrJson(key, jsonPath, subject) {\n      const saved = localStorage.getItem(key);\n      if (saved) {\n        subject.next(JSON.parse(saved));\n      } else {\n        this.http.get(jsonPath).subscribe(data => {\n          this.save(key, data, subject);\n        });\n      }\n    }\n    save(key, data, subject) {\n      localStorage.setItem(key, JSON.stringify(data));\n      subject.next(data);\n    }\n    // Generic CRUD\n    getData(key) {\n      switch (key) {\n        case 'products':\n          return this.products.asObservable();\n        case 'categories':\n          return this.categories.asObservable();\n        case 'rentals':\n          return this.rentals.asObservable();\n        case 'orders':\n          return this.orders.asObservable();\n        case 'payments':\n          return this.payments.asObservable();\n        case 'customers':\n          return this.customers.asObservable();\n        case 'settings':\n          return this.settings.asObservable();\n      }\n    }\n    addItem(key, item) {\n      const subject = this[key];\n      const current = subject.value;\n      const newData = [...current, {\n        ...item,\n        id: Date.now()\n      }];\n      this.save(key, newData, subject);\n    }\n    updateItem(key, id, updates) {\n      const subject = this[key];\n      const current = subject.value;\n      const index = current.findIndex(i => i.id === id || i.orderId === id || i.transactionId === id);\n      if (index > -1) {\n        const newData = [...current];\n        newData[index] = {\n          ...newData[index],\n          ...updates\n        };\n        this.save(key, newData, subject);\n      }\n    }\n    deleteItem(key, id) {\n      const subject = this[key];\n      const current = subject.value;\n      const newData = current.filter(i => i.id !== id);\n      this.save(key, newData, subject);\n    }\n    updateSettings(newSettings) {\n      this.save('settings', newSettings, this.settings);\n    }\n    static ɵfac = function CoreService_Factory(t) {\n      return new (t || CoreService)(i0.ɵɵinject(i1.HttpClient));\n    };\n    static ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: CoreService,\n      factory: CoreService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n  return CoreService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}