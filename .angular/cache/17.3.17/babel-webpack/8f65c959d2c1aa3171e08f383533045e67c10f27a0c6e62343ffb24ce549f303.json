{"ast":null,"code":"import { ActivatedRoute } from '@angular/router';\nimport { CoreService } from '../../services/core.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../services/core.service\";\nimport * as i3 from \"@angular/common\";\nconst _c0 = (a0, a1, a2, a3) => ({\n  \"bg-yellow-100 text-yellow-700\": a0,\n  \"bg-blue-100 text-blue-700\": a1,\n  \"bg-green-100 text-green-700\": a2,\n  \"bg-red-100 text-red-700\": a3\n});\nfunction OrderDetailsComponent_div_0_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 52)(1, \"div\", 53);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\", 54);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const step_r3 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵclassMap(ctx_r1.orderStepIndex >= step_r3.index ? \"bg-primary text-white scale-110 shadow-lg shadow-primary/30\" : \"bg-white border-2 border-gray-100 text-gray-300\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.orderStepIndex >= step_r3.index ? \"\\u2713\" : step_r3.index + 1, \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵclassMap(ctx_r1.orderStepIndex >= step_r3.index ? \"text-navy font-bold\" : \"text-gray-400 font-medium\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(step_r3.label);\n  }\n}\nfunction OrderDetailsComponent_div_0_tr_88_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 55);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 56);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 57);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 58);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const item_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r4.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r4.quantity);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"$\", item_r4.price, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"$\", item_r4.price * item_r4.quantity, \"\");\n  }\n}\nfunction OrderDetailsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"div\", 3)(3, \"a\", 4);\n    i0.ɵɵtext(4, \"\\u2B05\\uFE0F\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"h2\", 5);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"span\", 6);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 7)(10, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function OrderDetailsComponent_div_0_Template_button_click_10_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.printInvoice());\n    });\n    i0.ɵɵtext(11, \"\\uD83D\\uDCC4 Invoice\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 9)(13, \"button\", 10);\n    i0.ɵɵtext(14, \"Update Status \\u25BE\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"div\", 11)(16, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function OrderDetailsComponent_div_0_Template_button_click_16_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.updateStatus(\"Packing\"));\n    });\n    i0.ɵɵtext(17, \"Packing\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function OrderDetailsComponent_div_0_Template_button_click_18_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.updateStatus(\"Shipping\"));\n    });\n    i0.ɵɵtext(19, \"Shipping\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function OrderDetailsComponent_div_0_Template_button_click_20_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.updateStatus(\"Delivered\"));\n    });\n    i0.ɵɵtext(21, \"Delivered\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function OrderDetailsComponent_div_0_Template_button_click_22_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.updateStatus(\"Cancelled\"));\n    });\n    i0.ɵɵtext(23, \"Cancelled\");\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(24, \"div\", 16)(25, \"div\", 17);\n    i0.ɵɵelement(26, \"div\", 18)(27, \"div\", 19);\n    i0.ɵɵtemplate(28, OrderDetailsComponent_div_0_div_28_Template, 5, 6, \"div\", 20);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(29, \"div\", 21)(30, \"div\", 22)(31, \"div\", 23)(32, \"h4\", 24);\n    i0.ɵɵtext(33, \"Customer Details\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"div\", 25)(35, \"div\", 3)(36, \"div\", 26);\n    i0.ɵɵtext(37, \" JD\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(38, \"div\")(39, \"p\", 27);\n    i0.ɵɵtext(40);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(41, \"p\", 28);\n    i0.ɵɵtext(42);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(43, \"div\", 29)(44, \"p\", 30)(45, \"span\");\n    i0.ɵɵtext(46, \"\\uD83D\\uDCDE\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(47);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(48, \"p\", 31)(49, \"span\");\n    i0.ɵɵtext(50, \"\\uD83D\\uDCCD\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(51);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(52, \"div\", 23)(53, \"h4\", 24);\n    i0.ɵɵtext(54, \"Payment Meta\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(55, \"div\", 32)(56, \"div\", 33)(57, \"span\", 34);\n    i0.ɵɵtext(58, \"Method:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(59, \"span\", 27);\n    i0.ɵɵtext(60);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(61, \"div\", 33)(62, \"span\", 34);\n    i0.ɵɵtext(63, \"Status:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(64, \"span\", 35);\n    i0.ɵɵtext(65);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(66, \"div\", 36)(67, \"p\", 37);\n    i0.ɵɵtext(68, \"Transaction Ref\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(69, \"p\", 38);\n    i0.ɵɵtext(70);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(71, \"div\", 39)(72, \"div\", 40)(73, \"div\", 41)(74, \"h4\", 42);\n    i0.ɵɵtext(75, \"Order Items\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(76, \"table\", 43)(77, \"thead\", 44)(78, \"tr\")(79, \"th\", 45);\n    i0.ɵɵtext(80, \"Item\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(81, \"th\", 45);\n    i0.ɵɵtext(82, \"Qty\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(83, \"th\", 45);\n    i0.ɵɵtext(84, \"Price\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(85, \"th\", 46);\n    i0.ɵɵtext(86, \"Subtotal\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(87, \"tbody\", 47);\n    i0.ɵɵtemplate(88, OrderDetailsComponent_div_0_tr_88_Template, 9, 4, \"tr\", 48);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(89, \"tfoot\", 49)(90, \"tr\")(91, \"td\", 50);\n    i0.ɵɵtext(92, \" Grand Total\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(93, \"td\", 51);\n    i0.ɵɵtext(94);\n    i0.ɵɵelementEnd()()()()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"Order #\", ctx_r1.order.id, \"\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction4(15, _c0, ctx_r1.order.orderStatus === \"Packing\", ctx_r1.order.orderStatus === \"Shipping\", ctx_r1.order.orderStatus === \"Delivered\", ctx_r1.order.orderStatus === \"Cancelled\"));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.order.orderStatus, \" \");\n    i0.ɵɵadvance(19);\n    i0.ɵɵstyleProp(\"width\", ctx_r1.timelineProgress, \"%\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.timelineSteps);\n    i0.ɵɵadvance(12);\n    i0.ɵɵtextInterpolate(ctx_r1.order.customer);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Customer ID: #CUST-\", ctx_r1.order.id, \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.order.mobile, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.order.address, \"\");\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate(ctx_r1.order.paymentMethod);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.order.paymentStatus);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"TXN-\", ctx_r1.order.id, \"-8899\");\n    i0.ɵɵadvance(18);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.order.items);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" $\", ctx_r1.order.totalAmount, \"\");\n  }\n}\nexport let OrderDetailsComponent = /*#__PURE__*/(() => {\n  class OrderDetailsComponent {\n    route;\n    core;\n    order;\n    timelineSteps = [{\n      label: 'Pending',\n      index: 0\n    }, {\n      label: 'Packing',\n      index: 1\n    }, {\n      label: 'Shipping',\n      index: 2\n    }, {\n      label: 'Delivered',\n      index: 3\n    }];\n    constructor(route, core) {\n      this.route = route;\n      this.core = core;\n    }\n    ngOnInit() {\n      const id = this.route.snapshot.params['id'];\n      this.core.getData('orders').subscribe(orders => {\n        this.order = orders.find(o => o.id === id);\n      });\n    }\n    get orderStepIndex() {\n      if (!this.order) return 0;\n      switch (this.order.orderStatus) {\n        case 'Packing':\n          return 1;\n        case 'Shipping':\n          return 2;\n        case 'Delivered':\n          return 3;\n        case 'Cancelled':\n          return -1;\n        default:\n          return 0;\n      }\n    }\n    get timelineProgress() {\n      if (this.orderStepIndex === -1) return 0;\n      return this.orderStepIndex / (this.timelineSteps.length - 1) * 100;\n    }\n    updateStatus(status) {\n      this.core.updateItem('orders', this.order.id, {\n        orderStatus: status\n      });\n      // Auto pay if delivered (as per requirements)\n      if (status === 'Delivered') {\n        this.core.updateItem('orders', this.order.id, {\n          paymentStatus: 'Paid'\n        });\n        // Update linked payment status\n        this.core.updateItem('payments', this.order.id, {\n          status: 'Paid'\n        });\n      }\n    }\n    printInvoice() {\n      alert('Generating PDF Invoice: INV-' + this.order.id + '-' + Math.floor(Math.random() * 9000));\n    }\n    static ɵfac = function OrderDetailsComponent_Factory(t) {\n      return new (t || OrderDetailsComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.CoreService));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: OrderDetailsComponent,\n      selectors: [[\"app-order-details\"]],\n      decls: 1,\n      vars: 1,\n      consts: [[\"class\", \"space-y-8\", \"data-aos\", \"fade-up\", 4, \"ngIf\"], [\"data-aos\", \"fade-up\", 1, \"space-y-8\"], [1, \"flex\", \"items-center\", \"justify-between\"], [1, \"flex\", \"items-center\", \"gap-4\"], [\"routerLink\", \"/orders\", 1, \"p-2\", \"hover:bg-white\", \"rounded-xl\", \"shadow-sm\"], [1, \"text-2xl\", \"font-bold\", \"text-navy\"], [1, \"px-4\", \"py-1\", \"rounded-full\", \"text-xs\", \"font-bold\", \"uppercase\", \"tracking-widest\", \"border\", 3, \"ngClass\"], [1, \"flex\", \"items-center\", \"gap-3\"], [1, \"px-4\", \"py-2\", \"border\", \"rounded-xl\", \"font-bold\", \"text-navy\", \"hover:bg-white\", \"shadow-soft\", 3, \"click\"], [1, \"relative\", \"group\"], [1, \"btn-primary\", \"py-2\", \"px-6\"], [1, \"absolute\", \"right-0\", \"mt-2\", \"w-48\", \"bg-white\", \"rounded-2xl\", \"shadow-2xl\", \"border\", \"border-gray-100\", \"py-2\", \"hidden\", \"group-hover:block\", \"z-50\", \"animate-fade-in\"], [1, \"w-full\", \"text-left\", \"px-4\", \"py-2\", \"hover:bg-yellow-50\", \"text-yellow-600\", \"font-bold\", \"text-sm\", 3, \"click\"], [1, \"w-full\", \"text-left\", \"px-4\", \"py-2\", \"hover:bg-blue-50\", \"text-blue-600\", \"font-bold\", \"text-sm\", 3, \"click\"], [1, \"w-full\", \"text-left\", \"px-4\", \"py-2\", \"hover:bg-green-50\", \"text-green-600\", \"font-bold\", \"text-sm\", 3, \"click\"], [1, \"w-full\", \"text-left\", \"px-4\", \"py-2\", \"hover:bg-red-50\", \"text-red-600\", \"font-bold\", \"text-sm\", 3, \"click\"], [1, \"card\", \"!p-8\"], [1, \"flex\", \"items-center\", \"justify-between\", \"relative\"], [1, \"absolute\", \"top-1/2\", \"left-0\", \"w-full\", \"h-1\", \"bg-gray-100\", \"-translate-y-1/2\", \"z-0\"], [1, \"absolute\", \"top-1/2\", \"left-0\", \"h-1\", \"bg-primary\", \"-translate-y-1/2\", \"z-0\", \"transition-all\", \"duration-1000\"], [\"class\", \"relative z-10 flex flex-col items-center gap-3\", 4, \"ngFor\", \"ngForOf\"], [1, \"grid\", \"grid-cols-1\", \"lg:grid-cols-3\", \"gap-8\"], [1, \"lg:col-span-1\", \"space-y-6\"], [1, \"card\"], [1, \"text-lg\", \"font-bold\", \"text-navy\", \"mb-4\", \"border-b\", \"pb-2\"], [1, \"space-y-4\"], [1, \"w-12\", \"h-12\", \"bg-primary/10\", \"rounded-full\", \"flex\", \"items-center\", \"justify-center\", \"text-primary\", \"font-bold\"], [1, \"font-bold\", \"text-navy\"], [1, \"text-xs\", \"text-gray-400\"], [1, \"pt-4\", \"space-y-3\"], [1, \"text-sm\", \"flex\", \"items-center\", \"gap-3\", \"text-gray-600\"], [1, \"text-sm\", \"flex\", \"items-start\", \"gap-3\", \"text-gray-600\"], [1, \"space-y-3\"], [1, \"flex\", \"justify-between\", \"text-sm\"], [1, \"text-gray-400\"], [1, \"font-bold\", \"text-primary\"], [1, \"pt-2\", \"border-t\", \"mt-2\"], [1, \"text-[10px]\", \"uppercase\", \"text-gray-400\", \"font-bold\", \"mb-1\"], [1, \"text-xs\", \"font-mono\", \"font-bold\", \"text-gray-600\"], [1, \"lg:col-span-2\", \"space-y-6\"], [1, \"card\", \"!p-0\", \"overflow-hidden\"], [1, \"p-6\", \"border-b\"], [1, \"text-lg\", \"font-bold\", \"text-navy\"], [1, \"w-full\", \"text-left\"], [1, \"bg-lightgray\"], [1, \"px-6\", \"py-3\", \"text-xs\", \"font-bold\", \"text-gray-400\", \"uppercase\"], [1, \"px-6\", \"py-3\", \"text-xs\", \"font-bold\", \"text-gray-400\", \"uppercase\", \"text-right\"], [1, \"divide-y\", \"divide-gray-50\", \"italic\"], [4, \"ngFor\", \"ngForOf\"], [1, \"bg-lightgray/50\", \"border-t-2\", \"border-gray-100\"], [\"colspan\", \"3\", 1, \"px-6\", \"py-4\", \"text-right\", \"font-medium\", \"text-gray-400\", \"font-mono\", \"italic\"], [1, \"px-6\", \"py-4\", \"text-right\", \"text-xl\", \"font-bold\", \"text-primary\", \"font-mono\"], [1, \"relative\", \"z-10\", \"flex\", \"flex-col\", \"items-center\", \"gap-3\"], [1, \"w-10\", \"h-10\", \"rounded-full\", \"flex\", \"items-center\", \"justify-center\", \"font-bold\", \"transition-all\", \"duration-500\"], [1, \"text-xs\", \"text-center\"], [1, \"px-6\", \"py-4\", \"font-bold\", \"text-navy\"], [1, \"px-6\", \"py-4\"], [1, \"px-6\", \"py-4\", \"font-mono\", \"text-gray-500\"], [1, \"px-6\", \"py-4\", \"font-mono\", \"font-bold\", \"text-navy\", \"text-right\"]],\n      template: function OrderDetailsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵtemplate(0, OrderDetailsComponent_div_0_Template, 95, 20, \"div\", 0);\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"ngIf\", ctx.order);\n        }\n      },\n      dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf, i1.RouterLink],\n      styles: [\".timeline-step[_ngcontent-%COMP%]{@apply relative z-10 flex flex-col items-center gap-3;}\"]\n    });\n  }\n  return OrderDetailsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}