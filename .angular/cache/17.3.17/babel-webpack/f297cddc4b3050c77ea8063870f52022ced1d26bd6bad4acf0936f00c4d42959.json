{"ast":null,"code":"import { CoreService } from '../../services/core.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/core.service\";\nimport * as i2 from \"@angular/common\";\nconst _c0 = (a0, a1, a2, a3) => ({\n  \"bg-green-100 text-green-600\": a0,\n  \"bg-yellow-100 text-yellow-600\": a1,\n  \"bg-red-100 text-red-600\": a2,\n  \"bg-gray-100 text-gray-600\": a3\n});\nfunction PaymentListComponent_tr_65_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\", 30)(1, \"td\", 31);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 32);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 33);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 34);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 35)(10, \"span\", 36);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"td\", 37)(13, \"div\", 38)(14, \"button\", 39);\n    i0.ɵɵlistener(\"click\", function PaymentListComponent_tr_65_Template_button_click_14_listener() {\n      const p_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.issueRefund(p_r2));\n    });\n    i0.ɵɵtext(15, \"Refund\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const p_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r2.transactionId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"#\", p_r2.orderId, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r2.customer);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"$\", p_r2.amount, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction4(6, _c0, p_r2.status === \"Paid\", p_r2.status === \"Pending\", p_r2.status === \"Failed\", p_r2.status === \"Refunded\"));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", p_r2.status, \" \");\n  }\n}\nexport let PaymentListComponent = /*#__PURE__*/(() => {\n  class PaymentListComponent {\n    core;\n    payments$;\n    totalRevenue = 0;\n    onlinePayments = 0;\n    codPayments = 0;\n    constructor(core) {\n      this.core = core;\n      this.payments$ = this.core.getData('payments');\n    }\n    ngOnInit() {\n      this.payments$.subscribe(payments => {\n        this.totalRevenue = payments.filter(p => p.status === 'Paid').reduce((sum, p) => sum + p.amount, 0);\n        this.onlinePayments = payments.filter(p => p.method === 'Online' && p.status === 'Paid').reduce((sum, p) => sum + p.amount, 0);\n        this.codPayments = payments.filter(p => p.method === 'COD').reduce((sum, p) => sum + p.amount, 0);\n      });\n    }\n    ngAfterViewInit() {\n      new Chart('revenueTrendChart', {\n        type: 'line',\n        data: {\n          labels: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n          datasets: [{\n            label: 'Revenue',\n            data: [1200, 1900, 3000, 5000, 2000, 3000, 4500],\n            borderColor: '#F7931E',\n            backgroundColor: 'rgba(247, 147, 30, 0.1)',\n            fill: true,\n            tension: 0.4\n          }]\n        },\n        options: {\n          plugins: {\n            legend: {\n              display: false\n            }\n          }\n        }\n      });\n    }\n    issueRefund(payment) {\n      if (confirm('Issue full refund for Order #' + payment.orderId + '?')) {\n        this.core.updateItem('payments', payment.transactionId, {\n          status: 'Refunded'\n        });\n      }\n    }\n    static ɵfac = function PaymentListComponent_Factory(t) {\n      return new (t || PaymentListComponent)(i0.ɵɵdirectiveInject(i1.CoreService));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: PaymentListComponent,\n      selectors: [[\"app-payment-list\"]],\n      decls: 67,\n      vars: 8,\n      consts: [[1, \"space-y-8\"], [1, \"grid\", \"grid-cols-1\", \"md:grid-cols-2\", \"lg:grid-cols-4\", \"gap-6\"], [1, \"card\", \"bg-navy\", \"text-white\", \"relative\", \"overflow-hidden\"], [1, \"absolute\", \"right-0\", \"top-0\", \"opacity-10\", \"text-6xl\"], [1, \"text-white/60\", \"text-sm\", \"font-medium\"], [1, \"text-3xl\", \"font-bold\", \"mt-1\"], [1, \"text-green-400\", \"text-xs\", \"mt-4\", \"font-bold\"], [1, \"card\", \"relative\", \"overflow-hidden\"], [1, \"text-gray-500\", \"text-sm\", \"font-medium\"], [1, \"text-3xl\", \"font-bold\", \"text-navy\", \"mt-1\"], [1, \"text-gray-400\", \"text-xs\", \"mt-4\"], [1, \"w-full\", \"bg-gray-100\", \"h-1.5\", \"rounded-full\", \"mt-5\"], [1, \"bg-primary\", \"h-full\", \"rounded-full\"], [1, \"text-3xl\", \"font-bold\", \"text-red-500\", \"mt-1\"], [1, \"text-red-400\", \"text-xs\", \"mt-4\"], [1, \"grid\", \"grid-cols-1\", \"lg:grid-cols-3\", \"gap-8\"], [1, \"lg:col-span-1\", \"card\"], [1, \"text-lg\", \"font-bold\", \"text-navy\", \"mb-6\"], [\"id\", \"revenueTrendChart\", 1, \"max-h-[250px]\"], [1, \"lg:col-span-2\", \"card\", \"!p-0\", \"overflow-hidden\"], [1, \"p-6\", \"flex\", \"items-center\", \"justify-between\", \"border-b\"], [1, \"text-lg\", \"font-bold\", \"text-navy\"], [\"type\", \"text\", \"placeholder\", \"Search transactions...\", 1, \"px-4\", \"py-1.5\", \"border\", \"rounded-xl\", \"text-sm\", \"outline-none\"], [1, \"overflow-x-auto\"], [1, \"w-full\", \"text-left\"], [1, \"bg-lightgray\"], [1, \"px-6\", \"py-4\", \"text-xs\", \"font-bold\", \"text-gray-400\", \"uppercase\"], [1, \"px-6\", \"py-4\", \"text-xs\", \"font-bold\", \"text-gray-400\", \"uppercase\", \"text-right\"], [1, \"divide-y\", \"divide-gray-50\"], [\"class\", \"hover:bg-gray-50 group\", 4, \"ngFor\", \"ngForOf\"], [1, \"hover:bg-gray-50\", \"group\"], [1, \"px-6\", \"py-4\", \"font-mono\", \"text-sm\", \"font-bold\", \"text-gray-600\"], [1, \"px-6\", \"py-4\", \"font-bold\", \"text-navy\"], [1, \"px-6\", \"py-4\", \"text-sm\"], [1, \"px-6\", \"py-4\", \"font-bold\", \"text-primary\"], [1, \"px-6\", \"py-4\"], [1, \"px-3\", \"py-1\", \"rounded-full\", \"text-[10px]\", \"font-black\", \"uppercase\", 3, \"ngClass\"], [1, \"px-6\", \"py-4\", \"text-right\"], [1, \"opacity-0\", \"group-hover:opacity-100\", \"flex\", \"items-center\", \"justify-end\", \"gap-2\"], [1, \"text-xs\", \"font-bold\", \"text-red-500\", \"hover:underline\", 3, \"click\"]],\n      template: function PaymentListComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3);\n          i0.ɵɵtext(4, \"\\uD83D\\uDCB0\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"p\", 4);\n          i0.ɵɵtext(6, \"Total Revenue\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"h3\", 5);\n          i0.ɵɵtext(8);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"p\", 6);\n          i0.ɵɵtext(10, \"\\u2191 15% vs last month\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(11, \"div\", 7)(12, \"div\", 3);\n          i0.ɵɵtext(13, \"\\uD83D\\uDCB3\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"p\", 8);\n          i0.ɵɵtext(15, \"Online Payments\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"h3\", 9);\n          i0.ɵɵtext(17);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"p\", 10);\n          i0.ɵɵtext(19, \"Calculated from 85 trans.\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(20, \"div\", 7)(21, \"div\", 3);\n          i0.ɵɵtext(22, \"\\uD83D\\uDE9A\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(23, \"p\", 8);\n          i0.ɵɵtext(24, \"COD Payments\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(25, \"h3\", 9);\n          i0.ɵɵtext(26);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(27, \"div\", 11);\n          i0.ɵɵelement(28, \"div\", 12);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(29, \"div\", 7)(30, \"div\", 3);\n          i0.ɵɵtext(31, \"\\uD83D\\uDD04\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(32, \"p\", 8);\n          i0.ɵɵtext(33, \"Refunded Amount\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(34, \"h3\", 13);\n          i0.ɵɵtext(35, \"$420\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(36, \"p\", 14);\n          i0.ɵɵtext(37, \"2 refunds this week\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(38, \"div\", 15)(39, \"div\", 16)(40, \"h4\", 17);\n          i0.ɵɵtext(41, \"Revenue Trend\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(42, \"canvas\", 18);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(43, \"div\", 19)(44, \"div\", 20)(45, \"h4\", 21);\n          i0.ɵɵtext(46, \"Transaction Log\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(47, \"input\", 22);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(48, \"div\", 23)(49, \"table\", 24)(50, \"thead\", 25)(51, \"tr\")(52, \"th\", 26);\n          i0.ɵɵtext(53, \"TXN ID\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(54, \"th\", 26);\n          i0.ɵɵtext(55, \"Order\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(56, \"th\", 26);\n          i0.ɵɵtext(57, \"Customer\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(58, \"th\", 26);\n          i0.ɵɵtext(59, \"Amount\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(60, \"th\", 26);\n          i0.ɵɵtext(61, \"Status\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(62, \"th\", 27);\n          i0.ɵɵtext(63, \"Action\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(64, \"tbody\", 28);\n          i0.ɵɵtemplate(65, PaymentListComponent_tr_65_Template, 16, 11, \"tr\", 29);\n          i0.ɵɵpipe(66, \"async\");\n          i0.ɵɵelementEnd()()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(8);\n          i0.ɵɵtextInterpolate1(\"$\", ctx.totalRevenue, \"\");\n          i0.ɵɵadvance(9);\n          i0.ɵɵtextInterpolate1(\"$\", ctx.onlinePayments, \"\");\n          i0.ɵɵadvance(9);\n          i0.ɵɵtextInterpolate1(\"$\", ctx.codPayments, \"\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵstyleProp(\"width\", 40, \"%\");\n          i0.ɵɵadvance(37);\n          i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(66, 6, ctx.payments$));\n        }\n      },\n      dependencies: [i2.NgClass, i2.NgForOf, i2.AsyncPipe],\n      styles: [\"[_nghost-%COMP%]{display:block}\"]\n    });\n  }\n  return PaymentListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}