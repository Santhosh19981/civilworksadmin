"use strict";(self.webpackChunkcivilworksadmin=self.webpackChunkcivilworksadmin||[]).push([[76],{4796:(m,u,r)=>{r.d(u,{u:()=>h});var o=r(4412),l=r(4438),g=r(8986);let h=(()=>{class a{router;loggedIn=new o.t(this.checkToken());constructor(t){this.router=t}checkToken(){return!!localStorage.getItem("admin_token")}isLoggedIn(){return this.loggedIn.asObservable()}login(t,s){return"admin@buildpro.com"===t&&"admin123"===s&&(localStorage.setItem("admin_token","fake-jwt-token"),this.loggedIn.next(!0),!0)}logout(){localStorage.removeItem("admin_token"),this.loggedIn.next(!1),this.router.navigate(["/login"])}static \u0275fac=function(s){return new(s||a)(l.KVO(g.Ix))};static \u0275prov=l.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()},6845:(m,u,r)=>{r.d(u,{P:()=>h});var o=r(4412),l=r(4438),g=r(1626);let h=(()=>{class a{http;products=new o.t([]);categories=new o.t([]);rentals=new o.t([]);orders=new o.t([]);payments=new o.t([]);customers=new o.t([]);settings=new o.t({deliveryCharge:50,taxPercent:12,enableCOD:!0,themeColor:"#0B2C4D"});constructor(t){this.http=t,this.initData()}initData(){this.loadFromStorageOrJson("products","assets/data/products.json",this.products),this.loadFromStorageOrJson("categories","assets/data/categories.json",this.categories),this.loadFromStorageOrJson("rentals","assets/data/rentals.json",this.rentals),this.loadFromStorageOrJson("orders","assets/data/orders.json",this.orders),this.loadFromStorageOrJson("payments","assets/data/payments.json",this.payments),this.loadFromStorageOrJson("customers","assets/data/customers.json",this.customers);const t=localStorage.getItem("settings");t&&this.settings.next(JSON.parse(t))}loadFromStorageOrJson(t,s,e){const i=localStorage.getItem(t);i?e.next(JSON.parse(i)):this.http.get(s).subscribe(n=>{this.save(t,n,e)})}save(t,s,e){localStorage.setItem(t,JSON.stringify(s)),e.next(s)}getData(t){switch(t){case"products":return this.products.asObservable();case"categories":return this.categories.asObservable();case"rentals":return this.rentals.asObservable();case"orders":return this.orders.asObservable();case"payments":return this.payments.asObservable();case"customers":return this.customers.asObservable();case"settings":return this.settings.asObservable()}}addItem(t,s){const e=this[t],n=[...e.value,{...s,id:Date.now()}];this.save(t,n,e)}updateItem(t,s,e){const i=this[t],n=i.value,d=n.findIndex(c=>c.id===s||c.orderId===s||c.transactionId===s);if(d>-1){const c=[...n];c[d]={...c[d],...e},this.save(t,c,i)}}deleteItem(t,s){const e=this[t],n=e.value.filter(d=>d.id!==s);this.save(t,n,e)}updateSettings(t){this.save("settings",t,this.settings)}static \u0275fac=function(s){return new(s||a)(l.KVO(g.Qq))};static \u0275prov=l.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()}}]);